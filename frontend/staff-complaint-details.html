<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Complaint Details ‚Äì ResolveIT</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="complaint-details-body">
    <!-- Split Background -->
    <div class="complaint-split-bg"></div>

    <!-- Main Container -->
    <div class="complaint-main">
        <!-- Top Navigation -->
        <nav class="complaint-nav">
            <div class="nav-left">
                <div class="profile-photo">ST</div>
                <span>Staff View - Complaint Details</span>
            </div>
            <div class="nav-right">
                <a href="staff-dashboard.html" class="nav-btn">‚Üê Back to Dashboard</a>
                <a href="staff-queue.html" class="nav-btn">Queue</a>
                <a href="index.html" class="logout-btn">Logout</a>
            </div>
        </nav>

        <!-- Page Title -->
        <div class="page-title">
            <h1 id="complaintTitle">Complaint CMP-001 Details</h1>
        </div>

        <!-- Main Content Grid -->
        <div class="complaint-content">
            <!-- Left Column -->
            <div class="left-column">
                <!-- Complaint Header Card -->
                <div class="complaint-header-card">
                    <div class="detail-row">
                        <span class="label">Complaint ID:</span>
                        <span class="value" id="complaintId">CMP-001</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Customer:</span>
                        <span class="value" id="customerName">John Doe</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Email:</span>
                        <span class="value" id="customerEmail">john.doe@email.com</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Phone:</span>
                        <span class="value" id="customerPhone">+1 (555) 123-4567</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Order ID:</span>
                        <span class="value" id="orderId">ORD-12345</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Issue Type:</span>
                        <span class="value" id="issueType">Wrong Product</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Priority:</span>
                        <span class="value" id="priority">üî• High</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Date Submitted:</span>
                        <span class="value" id="dateSubmitted">May 8, 2024</span>
                    </div>
                    <div class="detail-row">
                        <span class="label">Assigned Agent:</span>
                        <span class="value">Support Agent (You)</span>
                    </div>
                </div>

                <!-- Customer Description -->
                <div class="complaint-header-card">
                    <h3>Customer Description</h3>
                    <div class="customer-description" id="customerDescription">
                        I ordered a blue wireless headphone (Model: WH-1000XM4) but received a red wired headphone instead. The package was sealed properly but contained the wrong item. I need the correct product delivered as soon as possible as this was a gift for my daughter's birthday.
                    </div>
                </div>

                <!-- Status Tracker -->
                <div class="status-tracker-card">
                    <h3>Complaint Status</h3>
                    <div class="progress-tracker" id="statusTracker">
                        <div class="step completed">
                            <div class="step-circle">‚úì</div>
                            <span class="step-label">Submitted</span>
                        </div>
                        <div class="progress-line completed"></div>
                        <div class="step completed">
                            <div class="step-circle">‚úì</div>
                            <span class="step-label">Under Review</span>
                        </div>
                        <div class="progress-line completed"></div>
                        <div class="step current">
                            <div class="step-circle">3</div>
                            <span class="step-label">Assigned</span>
                        </div>
                        <div class="progress-line"></div>
                        <div class="step">
                            <div class="step-circle">4</div>
                            <span class="step-label">In Progress</span>
                        </div>
                        <div class="progress-line"></div>
                        <div class="step">
                            <div class="step-circle">5</div>
                            <span class="step-label">Resolved</span>
                        </div>
                    </div>
                </div>

                <!-- Staff Notes Timeline -->
                <div class="timeline-card">
                    <h3>Staff Notes & Updates</h3>
                    <div class="timeline" id="timeline">
                        <div class="timeline-item">
                            <div class="timeline-date">May 10, 2024 - 2:30 PM</div>
                            <div class="timeline-content">Complaint assigned to support agent. Investigating with warehouse team.</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-date">May 9, 2024 - 10:15 AM</div>
                            <div class="timeline-content">Initial review completed. Issue confirmed - wrong product shipped.</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-date">May 8, 2024 - 4:45 PM</div>
                            <div class="timeline-content">Complaint submitted by customer via online portal.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="right-column">
                <!-- Staff Actions Card -->
                <div class="user-view-card">
                    <h3>Staff Actions</h3>
                    <div class="staff-actions">
                        <button class="staff-action-btn primary" onclick="updateStatus()">Update Status</button>
                        <button class="staff-action-btn secondary" onclick="contactCustomer()">Contact Customer</button>
                        <button class="staff-action-btn success" onclick="resolveComplaint()">Mark Resolved</button>
                        <button class="staff-action-btn warning" onclick="escalateComplaint()">Escalate</button>
                    </div>
                </div>

                <!-- Customer Communication -->
                <div class="user-view-card">
                    <h3>Customer Communication</h3>
                    <div class="communication-history">
                        <div class="message customer-message">
                            <div class="message-header">
                                <strong>John Doe</strong>
                                <span class="message-time">May 8, 4:45 PM</span>
                            </div>
                            <div class="message-content">I received the wrong product. Please help me get the correct item.</div>
                        </div>
                        <div class="message staff-message">
                            <div class="message-header">
                                <strong>Support Agent</strong>
                                <span class="message-time">May 9, 10:30 AM</span>
                            </div>
                            <div class="message-content">Thank you for contacting us. We're investigating your issue and will update you soon.</div>
                        </div>
                    </div>
                    <div class="messaging-box">
                        <textarea placeholder="Type your message to customer..." class="message-input" id="staffMessage"></textarea>
                        <button class="send-btn" onclick="sendMessage()">Send Message</button>
                    </div>
                </div>

                <!-- Quick Info -->
                <div class="user-view-card">
                    <h3>Quick Info</h3>
                    <div class="quick-info">
                        <div class="info-item">
                            <span class="info-label">Time Since Assignment:</span>
                            <span class="info-value">2 hours 30 minutes</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">SLA Deadline:</span>
                            <span class="info-value due-soon">4 hours remaining</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Customer Tier:</span>
                            <span class="info-value">Premium</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Get complaint ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const complaintId = urlParams.get('id') || 'CMP-001';

        // Sample complaint data
        const complaintData = {
            'CMP-001': {
                customer: 'John Doe',
                email: 'john.doe@email.com',
                phone: '+1 (555) 123-4567',
                orderId: 'ORD-12345',
                issueType: 'Wrong Product',
                priority: 'High',
                description: 'I ordered a blue wireless headphone (Model: WH-1000XM4) but received a red wired headphone instead. The package was sealed properly but contained the wrong item. I need the correct product delivered as soon as possible as this was a gift for my daughter\'s birthday.'
            },
            'CMP-005': {
                customer: 'Alice Johnson',
                email: 'alice.j@email.com',
                phone: '+1 (555) 987-6543',
                orderId: 'ORD-67890',
                issueType: 'Late Delivery',
                priority: 'Medium',
                description: 'My order was supposed to be delivered 3 days ago but I still haven\'t received it. The tracking shows it\'s been stuck at the local facility. I need this urgently for a business presentation.'
            },
            'CMP-007': {
                customer: 'Bob Wilson',
                email: 'bob.wilson@email.com',
                phone: '+1 (555) 456-7890',
                orderId: 'ORD-11223',
                issueType: 'Damaged Item',
                priority: 'High',
                description: 'The laptop I received has a cracked screen and damaged keyboard. The packaging was also damaged when it arrived. I need a replacement immediately as I need it for work.'
            },
            'CMP-012': {
                customer: 'Sarah Brown',
                email: 'sarah.b@email.com',
                phone: '+1 (555) 321-9876',
                orderId: 'ORD-33445',
                issueType: 'Missing Item',
                priority: 'Medium',
                description: 'One item from my order is missing. I ordered 3 books but only received 2. The missing book is "JavaScript Guide" which I need for my course.'
            },
            'CMP-015': {
                customer: 'Mike Davis',
                email: 'mike.d@email.com',
                phone: '+1 (555) 654-3210',
                orderId: 'ORD-55667',
                issueType: 'Refund Request',
                priority: 'Low',
                description: 'I want to return this item as it doesn\'t fit properly. The size chart was incorrect. Please process my refund.'
            },
            'CMP-018': {
                customer: 'Emma Wilson',
                email: 'emma.w@email.com',
                phone: '+1 (555) 789-0123',
                orderId: 'ORD-77889',
                issueType: 'Late Delivery',
                priority: 'Medium',
                description: 'My package is 2 days late. I need it for an event this weekend. Please expedite the delivery.'
            }
        };

        // Load complaint data
        function loadComplaintData() {
            const data = complaintData[complaintId];
            if (data) {
                document.getElementById('complaintTitle').textContent = `Complaint ${complaintId} Details`;
                document.getElementById('complaintId').textContent = complaintId;
                document.getElementById('customerName').textContent = data.customer;
                document.getElementById('customerEmail').textContent = data.email;
                document.getElementById('customerPhone').textContent = data.phone;
                document.getElementById('orderId').textContent = data.orderId;
                document.getElementById('issueType').textContent = data.issueType;
                document.getElementById('priority').textContent = data.priority;
                document.getElementById('customerDescription').textContent = data.description;
            }
        }

        function updateStatus() {
            const newStatus = prompt('Enter new status (Pending, In Progress, Resolved, Escalated):');
            if (newStatus) {
                alert(`Status updated to: ${newStatus}`);
                // Add to timeline
                addTimelineItem(`Status updated to: ${newStatus}`);
            }
        }

        function contactCustomer() {
            const method = prompt('Contact method (Email, Phone, SMS):');
            if (method) {
                alert(`Initiating ${method} contact with customer`);
                addTimelineItem(`Contacted customer via ${method}`);
            }
        }

        function resolveComplaint() {
            if (confirm(`Mark complaint ${complaintId} as resolved?`)) {
                alert(`Complaint ${complaintId} marked as resolved!`);
                addTimelineItem('Complaint marked as resolved');
            }
        }

        function escalateComplaint() {
            if (confirm(`Escalate complaint ${complaintId} to supervisor?`)) {
                alert(`Complaint ${complaintId} escalated to supervisor!`);
                addTimelineItem('Complaint escalated to supervisor');
            }
        }

        function sendMessage() {
            const message = document.getElementById('staffMessage').value;
            if (message.trim()) {
                alert('Message sent to customer!');
                document.getElementById('staffMessage').value = '';
                addTimelineItem('Message sent to customer');
            } else {
                alert('Please enter a message');
            }
        }

        function addTimelineItem(content) {
            const timeline = document.getElementById('timeline');
            const now = new Date();
            const timeString = now.toLocaleDateString() + ' - ' + now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            const newItem = document.createElement('div');
            newItem.className = 'timeline-item';
            newItem.innerHTML = `
                <div class="timeline-date">${timeString}</div>
                <div class="timeline-content">${content}</div>
            `;
            
            timeline.insertBefore(newItem, timeline.firstChild);
        }

        // Load data when page loads
        loadComplaintData();
    </script>
</body>
</html>